import streamlit as st
import numpy as np
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import plotly.graph_objects as go
import time

st.set_page_config(page_title="–ö–≤–∞–Ω—Ç–æ–≤–∞ –ó–∞–ø–ª—É—Ç–∞–Ω—ñ—Å—Ç—å", layout="wide")

def create_starfield(n=200):
    """–ì–µ–Ω–µ—Ä—É—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∑—ñ—Ä–æ–∫ –¥–ª—è —Ñ–æ–Ω—É"""
    x = np.random.uniform(-200, 200, n)
    y = np.random.uniform(-100, 100, n)
    z = np.random.uniform(-100, 100, n)
    return x, y, z

def run_entanglement_simulation():
    st.title("üîó –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏ –∑ –ö–≤–∞–Ω—Ç–æ–≤–æ—é –ó–∞–ø–ª—É—Ç–∞–Ω—ñ—Å—Ç—é")
    
    # –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –≤–∏–±–æ—Ä—É —Å–∏–º—É–ª—è—Ü—ñ—ó
    sim_type = st.radio("–û–±–µ—Ä—ñ—Ç—å –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç:", 
        ["1. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –®—Ç–µ—Ä–Ω–∞-–ì–µ—Ä–ª–∞—Ö–∞ (3D –ê–Ω—ñ–º–∞—Ü—ñ—è)", 
         "2. –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ë–µ–ª–ª–∞ (–ì—Ä–∞—Ñ—ñ–∫ –∫–æ—Ä–µ–ª—è—Ü—ñ—ó)",
         "3. –ö–æ—Å–º—ñ—á–Ω–∏–π –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç (–ù–µ–ª–æ–∫–∞–ª—å–Ω—ñ—Å—Ç—å)"])

    st.divider()

# === 1. –í–Ü–ó–£–ê–õ–Ü–ó–ê–¶–Ü–Ø –®–¢–ï–†–ù–ê-–ì–ï–†–õ–ê–•–ê (–í–ò–ü–†–ê–í–õ–ï–ù–ê –¢–ê –ü–û–ö–†–ê–©–ï–ù–ê) ===
    if sim_type == "1. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –®—Ç–µ—Ä–Ω–∞-–ì–µ—Ä–ª–∞—Ö–∞ (3D –ê–Ω—ñ–º–∞—Ü—ñ—è)":
        st.header("1. –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –®—Ç–µ—Ä–Ω–∞-–ì–µ—Ä–ª–∞—Ö–∞")
        st.markdown("**–°—É—Ç—å:** –†–æ–∑—â–µ–ø–ª–µ–Ω–Ω—è –ø—É—á–∫–∞ –∑–∞–ø–ª—É—Ç–∞–Ω–∏—Ö –µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–≤ —É –º–∞–≥–Ω—ñ—Ç–Ω–æ–º—É –ø–æ–ª—ñ.")
        
        col1, col2 = st.columns([3, 1])
        
        with col2:
            st.markdown("### üéÆ –ö–µ—Ä—É–≤–∞–Ω–Ω—è")
            if st.button("üî¥ –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤—É –ø–∞—Ä—É", type="primary"):
                st.session_state['run_sg'] = True
                st.session_state['outcome_sg'] = np.random.choice([0, 1])
            
            st.markdown("---")
            st.info("–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –ø–∞—Ä—É –µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–≤.")

        with col1:
            if 'outcome_sg' not in st.session_state:
                st.session_state['outcome_sg'] = 0
                
            outcome = st.session_state['outcome_sg']
            steps = 50
            x_left = np.linspace(0, -6, steps)
            x_right = np.linspace(0, 6, steps)
            y_path = np.zeros(steps)
            z_left = np.zeros(steps)
            z_right = np.zeros(steps)
            
            mag_start = int(steps * 0.33)
            t_def = np.linspace(0, 1, steps - mag_start)
            deflection = 1.5 * t_def**2
            
            if outcome == 0: 
                z_left[mag_start:] = deflection
                z_right[mag_start:] = -deflection
                res_text = "–†–µ–∑—É–ª—å—Ç–∞—Ç: –õ—ñ–≤–∏–π ‚¨Ü (S), –ü—Ä–∞–≤–∏–π ‚¨á (N)"
                c_l, c_r = 'red', 'blue'
                spin_L, spin_R = "‚Üë", "‚Üì"
            else:
                z_left[mag_start:] = -deflection
                z_right[mag_start:] = deflection
                res_text = "–†–µ–∑—É–ª—å—Ç–∞—Ç: –õ—ñ–≤–∏–π ‚¨á (N), –ü—Ä–∞–≤–∏–π ‚¨Ü (S)"
                c_l, c_r = 'blue', 'red'
                spin_L, spin_R = "‚Üì", "‚Üë"

            fig = go.Figure()

            # 1. –î–∂–µ—Ä–µ–ª–æ
            fig.add_trace(go.Scatter3d(x=[0], y=[0], z=[0], mode='markers', marker=dict(size=15, color='purple'), name='–î–∂–µ—Ä–µ–ª–æ'))
            
            # 2. –¢—Ä–∞—î–∫—Ç–æ—Ä—ñ—ó (–ü—É–Ω–∫—Ç–∏—Ä)
            fig.add_trace(go.Scatter3d(x=x_left, y=y_path, z=z_left, mode='lines', line=dict(color='gray', width=4, dash='dot'), name='–®–ª—è—Ö L'))
            fig.add_trace(go.Scatter3d(x=x_right, y=y_path, z=z_right, mode='lines', line=dict(color='gray', width=4, dash='dot'), name='–®–ª—è—Ö R'))

            # 3. –ú–∞–≥–Ω—ñ—Ç–∏
            # –õ—ñ–≤–∏–π
            fig.add_trace(go.Mesh3d(x=[-3,-3,-2,-2, -3,-3,-2,-2], y=[-1,1,1,-1, -1,1,1,-1], z=[1,1,1,1, 2,2,2,2], color='gray', opacity=0.3, name='L-Mag Top'))
            fig.add_trace(go.Mesh3d(x=[-3,-3,-2,-2, -3,-3,-2,-2], y=[-1,1,1,-1, -1,1,1,-1], z=[-2,-2,-2,-2, -1,-1,-1,-1], color='gray', opacity=0.3, name='L-Mag Bot'))
            # –ü—Ä–∞–≤–∏–π
            fig.add_trace(go.Mesh3d(x=[2,2,3,3, 2,2,3,3], y=[-1,1,1,-1, -1,1,1,-1], z=[1,1,1,1, 2,2,2,2], color='gray', opacity=0.3, name='R-Mag Top'))
            fig.add_trace(go.Mesh3d(x=[2,2,3,3, 2,2,3,3], y=[-1,1,1,-1, -1,1,1,-1], z=[-2,-2,-2,-2, -1,-1,-1,-1], color='gray', opacity=0.3, name='R-Mag Bot'))
            
            # –ü—ñ–¥–ø–∏—Å–∏
            fig.add_trace(go.Scatter3d(x=[-2.5, -2.5, 2.5, 2.5], y=[0,0,0,0], z=[1.2, -1.2, 1.2, -1.2], mode='text', text=['S', 'N', 'S', 'N'], textfont=dict(size=15, color='black'), showlegend=False))

            # 4. –ü–æ—á–∞—Ç–∫–æ–≤—ñ –µ–ª–µ–∫—Ç—Ä–æ–Ω–∏
            fig.add_trace(go.Scatter3d(x=[0], y=[0], z=[0], mode='markers', marker=dict(color=c_l, size=10), name='–ï–ª–µ–∫—Ç—Ä–æ–Ω L'))
            fig.add_trace(go.Scatter3d(x=[0], y=[0], z=[0], mode='markers', marker=dict(color=c_r, size=10), name='–ï–ª–µ–∫—Ç—Ä–æ–Ω R'))

            # –ê–Ω—ñ–º–∞—Ü—ñ—è
            frames = []
            for i in range(0, steps, 1):
                frames.append(go.Frame(data=[
                    go.Scatter3d(x=[x_left[i]], y=[0], z=[z_left[i]], mode='markers', marker=dict(color=c_l, size=10)),
                    go.Scatter3d(x=[x_right[i]], y=[0], z=[z_right[i]], mode='markers', marker=dict(color=c_r, size=10))
                ]))

            fig.update_layout(
                width=800, height=500, 
                scene=dict(xaxis=dict(title='–í—ñ—Å—å –ø—É—á–∫–∞', range=[-6.5, 6.5]), yaxis=dict(visible=False, range=[-2, 2]), zaxis=dict(title='–í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è', range=[-3, 3]), aspectmode='manual', aspectratio=dict(x=3, y=1, z=1)),
                updatemenus=[dict(type="buttons", showactive=False, buttons=[dict(label="‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç", method="animate", args=[None, dict(frame=dict(duration=30, redraw=True), fromcurrent=True)])])]
            )
            fig.frames = frames
            st.plotly_chart(fig)
            
            if st.session_state.get('run_sg'):
                st.success(f"**{res_text}**")

        # --- –î–ï–¢–ê–õ–¨–ù–ò–ô –û–ü–ò–° (–®–¢–ï–†–ù-–ì–ï–†–õ–ê–•) ---
        st.markdown("---")
        st.markdown("### üìö –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É")
        st.markdown(r"""
        **–Ü—Å—Ç–æ—Ä–∏—á–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:**
        –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–π –û—Ç—Ç–æ –®—Ç–µ—Ä–Ω–æ–º —ñ –í–∞–ª—å—Ç–µ—Ä–æ–º –ì–µ—Ä–ª–∞—Ö–æ–º —É 1922 —Ä–æ—Ü—ñ, —Å—Ç–∞–≤ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–º –¥–æ–∫–∞–∑–æ–º –∫–≤–∞–Ω—Ç—É–≤–∞–Ω–Ω—è –º–æ–º–µ–Ω—Ç—É —ñ–º–ø—É–ª—å—Å—É. –í–æ–Ω–∏ –ø—Ä–æ–ø—É—Å–∫–∞–ª–∏ –ø—É—á–æ–∫ –∞—Ç–æ–º—ñ–≤ —Å—Ä—ñ–±–ª–∞ —á–µ—Ä–µ–∑ —Å–∏–ª—å–Ω–µ –Ω–µ–æ–¥–Ω–æ—Ä—ñ–¥–Ω–µ –º–∞–≥–Ω—ñ—Ç–Ω–µ –ø–æ–ª–µ.

        **–§—ñ–∑–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—É:**
        1.  **–°–ø—ñ–Ω —è–∫ –º–∞–≥–Ω—ñ—Ç:** –ï–ª–µ–∫—Ç—Ä–æ–Ω (–∞–±–æ –∞—Ç–æ–º —Å—Ä—ñ–±–ª–∞) –º–∞—î –≤–ª–∞—Å–Ω–∏–π –º–æ–º–µ–Ω—Ç —ñ–º–ø—É–ª—å—Å—É ‚Äî —Å–ø—ñ–Ω. –¶–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —á–∞—Å—Ç–∏–Ω–∫—É –Ω–∞ –∫—Ä–∏—Ö—ñ—Ç–Ω–∏–π –º–∞–≥–Ω—ñ—Ç —ñ–∑ –º–∞–≥–Ω—ñ—Ç–Ω–∏–º –º–æ–º–µ–Ω—Ç–æ–º $\mu$.
        2.  **–ù–µ–æ–¥–Ω–æ—Ä—ñ–¥–Ω–µ –ø–æ–ª–µ:** –ú–∞–≥–Ω—ñ—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å –ø–æ–ª–µ, —è–∫–µ —Å–∏–ª—å–Ω—ñ—à–µ –≤ –æ–¥–Ω—ñ–π —Ç–æ—á—Ü—ñ –ø—Ä–æ—Å—Ç–æ—Ä—É —ñ —Å–ª–∞–±—à–µ –≤ —ñ–Ω—à—ñ–π (–≥—Ä–∞–¥—ñ—î–Ω—Ç –ø–æ–ª—è $\partial B / \partial z$).
        3.  **–°–∏–ª–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó:** –ù–∞ –º–∞–≥–Ω—ñ—Ç–Ω–∏–π –¥–∏–ø–æ–ª—å —É –Ω–µ–æ–¥–Ω–æ—Ä—ñ–¥–Ω–æ–º—É –ø–æ–ª—ñ –¥—ñ—î —Å–∏–ª–∞:
            $$ F_z = \mu_z \frac{\partial B}{\partial z} $$
        4.  **–ö–≤–∞–Ω—Ç—É–≤–∞–Ω–Ω—è:** –£ –∫–ª–∞—Å–∏—á–Ω—ñ–π —Ñ—ñ–∑–∏—Ü—ñ —Å—Ç—Ä—ñ–ª–∫–∞ –º–∞–≥–Ω—ñ—Ç—É –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤–µ—Ä–Ω—É—Ç–∞ –ø—ñ–¥ –±—É–¥—å-—è–∫–∏–º –∫—É—Ç–æ–º, —Ç–æ–º—É –º–∏ –æ—á—ñ–∫—É–≤–∞–ª–∏ –± –ø–æ–±–∞—á–∏—Ç–∏ —Å—É—Ü—ñ–ª—å–Ω—É —Å–º—É–≥—É –∞—Ç–æ–º—ñ–≤ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ. –ê–ª–µ —É –∫–≤–∞–Ω—Ç–æ–≤—ñ–π –º–µ—Ö–∞–Ω—ñ—Ü—ñ –ø—Ä–æ–µ–∫—Ü—ñ—è —Å–ø—ñ–Ω–∞ –Ω–∞ –≤—ñ—Å—å Z –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –ª–∏—à–µ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–Ω—è: $+\hbar/2$ (–≤–≥–æ—Ä—É) –∞–±–æ $-\hbar/2$ (–≤–Ω–∏–∑).
        
        **–ß–æ–º—É –∑–∞–ø–ª—É—Ç–∞–Ω—ñ—Å—Ç—å?**
        –£ –Ω–∞—à—ñ–π —Å–∏–º—É–ª—è—Ü—ñ—ó –º–∏ —Ä–æ–∑–≥–ª—è–¥–∞—î–º–æ –ø–∞—Ä—É –µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–≤ —É **—Å–∏–Ω–≥–ª–µ—Ç–Ω–æ–º—É —Å—Ç–∞–Ω—ñ**. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —ó—Ö–Ω—ñ–π —Å—É–º–∞—Ä–Ω–∏–π —Å–ø—ñ–Ω –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é. 
        $$ |\Psi\rangle = \frac{1}{\sqrt{2}} (| \uparrow \rangle_1 | \downarrow \rangle_2 - | \downarrow \rangle_1 | \uparrow \rangle_2) $$
        –¶–µ —Å—Ç–≤–æ—Ä—é—î –∂–æ—Ä—Å—Ç–∫—É –∫–æ—Ä–µ–ª—è—Ü—ñ—é: —è–∫—â–æ –æ–¥–∏–Ω –µ–ª–µ–∫—Ç—Ä–æ–Ω –≤—ñ–¥—Ö–∏–ª—è—î—Ç—å—Å—è –≤–≥–æ—Ä—É, —ñ–Ω—à–∏–π **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –≤—ñ–¥—Ö–∏–ª—è—î—Ç—å—Å—è –≤–Ω–∏–∑, —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ –∑–∞–∫–æ–Ω –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –º–æ–º–µ–Ω—Ç—É —ñ–º–ø—É–ª—å—Å—É. –¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ —ñ —É–∑–≥–æ–¥–∂–µ–Ω–æ, —â–æ —ñ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∞–Ω—ñ–º–∞—Ü—ñ—è.
        """)

    # =============================================================================
    # 2. –ù–ï–†–Ü–í–ù–Ü–°–¢–¨ –ë–ï–õ–õ–ê
    # =============================================================================
    elif sim_type == "2. –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ë–µ–ª–ª–∞ (–ì—Ä–∞—Ñ—ñ–∫ –∫–æ—Ä–µ–ª—è—Ü—ñ—ó)":
        st.header("2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ù–µ—Ä—ñ–≤–Ω–æ—Å—Ç—ñ –ë–µ–ª–ª–∞")
        
        c1, c2 = st.columns([1, 1])
        with c1:
            st.subheader("üõ† –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è")
            a = st.slider("–ö—É—Ç –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –ê (Œ±)", 0, 360, 0, 15)
            b = st.slider("–ö—É—Ç –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –ë (Œ≤)", 0, 360, 45, 15)
            theta = abs(a - b)
            st.info(f"–†—ñ–∑–Ω–∏—Ü—è: {theta}¬∞")
        
        with c2:
            st.subheader("üé≤ –°–∏–º—É–ª—è—Ü—ñ—è")
            # –°–ª–∞–π–¥–µ—Ä –∑ –∫—Ä–æ–∫–æ–º 100
            n = st.slider("–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å", 100, 10000, 1000, step=100)
            
            if st.button("–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç", type="primary"):
                rad = np.radians(theta)
                # –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å —Ä—ñ–∑–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
                p_diff = np.cos(rad/2)**2
                rv = np.random.random(n)
                diff = np.sum(rv < p_diff)
                same = n - diff
                # –ö–æ—Ä–µ–ª—è—Ü—ñ—è
                corr = (same - diff) / n
                
                fig, ax = plt.subplots(figsize=(6, 3))
                ang = np.linspace(0, 360, 100)
                ax.plot(ang, -np.cos(np.radians(ang)), 'k--', label='–ö–≤–∞–Ω—Ç–æ–≤–∞ —Ç–µ–æ—Ä—ñ—è')
                ax.plot([theta], [corr], 'ro', label='–ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç')
                ax.set_xlabel("–†—ñ–∑–Ω–∏—Ü—è –∫—É—Ç—ñ–≤")
                ax.set_ylabel("–ö–æ—Ä–µ–ª—è—Ü—ñ—è")
                ax.legend()
                st.pyplot(fig)
        
        # --- –î–ï–¢–ê–õ–¨–ù–ï –ü–û–Ø–°–ù–ï–ù–ù–Ø (–ë–ï–õ–õ) ---
        st.markdown("---")
        st.markdown("### üìö –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ù–µ—Ä—ñ–≤–Ω–æ—Å—Ç—ñ –ë–µ–ª–ª–∞")
        st.markdown(r"""
        **–ü—Ä–æ–±–ª–µ–º–∞ –ï–π–Ω—à—Ç–µ–π–Ω–∞-–ü–æ–¥–æ–ª—å—Å—å–∫–æ–≥–æ-–†–æ–∑–µ–Ω–∞ (EPR):**
        –ê–ª—å–±–µ—Ä—Ç –ï–π–Ω—à—Ç–µ–π–Ω –Ω–µ –≤—ñ—Ä–∏–≤, —â–æ –∫–≤–∞–Ω—Ç–æ–≤–∞ –º–µ—Ö–∞–Ω—ñ–∫–∞ –ø–æ–≤–Ω–∞. –í—ñ–Ω –≤–≤–∞–∂–∞–≤, —â–æ "–ë–æ–≥ –Ω–µ –≥—Ä–∞—î –≤ –∫–æ—Å—Ç—ñ", —ñ —â–æ —É —á–∞—Å—Ç–∏–Ω–æ–∫ —î **–ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏** ‚Äî —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, —è–∫—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å, —â–µ –¥–æ –º–æ–º–µ–Ω—Ç—É –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è. –¶—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **–ª–æ–∫–∞–ª—å–Ω–∏–º —Ä–µ–∞–ª—ñ–∑–º–æ–º**.

        **–¢–µ–æ—Ä–µ–º–∞ –ë–µ–ª–ª–∞:**
        –£ 1964 —Ä–æ—Ü—ñ –î–∂–æ–Ω –ë–µ–ª–ª –¥–æ–≤—ñ–≤, —â–æ —è–∫—â–æ –ª–æ–∫–∞–ª—å–Ω–∏–π —Ä–µ–∞–ª—ñ–∑–º –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π, —Ç–æ –∫–æ—Ä–µ–ª—è—Ü—ñ—è –º—ñ–∂ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å –¥–≤–æ—Ö —á–∞—Å—Ç–∏–Ω–æ–∫ –Ω–µ –º–æ–∂–µ –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ –ø–µ–≤–Ω—É –º–µ–∂—É (–ª—ñ–Ω—ñ–π–Ω–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∫—É—Ç–∞).
        
        * **–ö–ª–∞—Å–∏—á–Ω–µ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è:** –ì—Ä–∞—Ñ—ñ–∫ –∫–æ—Ä–µ–ª—è—Ü—ñ—ó –º–∞–≤ –±–∏ –±—É—Ç–∏ –ø—Ä—è–º–∏–º–∏ –ª—ñ–Ω—ñ—è–º–∏ (—Ç—Ä–∏–∫—É—Ç–Ω–∞ —Ñ–æ—Ä–º–∞).
        * **–ö–≤–∞–Ω—Ç–æ–≤–µ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è:** –ì—Ä–∞—Ñ—ñ–∫ –∫–æ—Ä–µ–ª—è—Ü—ñ—ó ‚Äî —Ü–µ –∫–æ—Å–∏–Ω—É—Å–æ—ó–¥–∞ ($E = -\cos(\theta)$).

        **–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∏–º—É–ª—è—Ü—ñ—ó:**
        –Ø–∫ –≤–∏ –±–∞—á–∏—Ç–µ –Ω–∞ –≥—Ä–∞—Ñ—ñ–∫—É, —á–µ—Ä–≤–æ–Ω–∞ —Ç–æ—á–∫–∞ (–≤–∞—à –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) –ª—è–≥–∞—î —Ç–æ—á–Ω–æ –Ω–∞ –ø—É–Ω–∫—Ç–∏—Ä–Ω—É –ª—ñ–Ω—ñ—é –∫–æ—Å–∏–Ω—É—Å–∞. –£ –ø–µ–≤–Ω–∏—Ö —Ç–æ—á–∫–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 45 –≥—Ä–∞–¥—É—Å—ñ–≤) –∫–≤–∞–Ω—Ç–æ–≤–∞ –∫–æ—Ä–µ–ª—è—Ü—ñ—è **—Å–∏–ª—å–Ω—ñ—à–∞**, –Ω—ñ–∂ —Ü–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ –º–æ–∂–ª–∏–≤–æ –¥–ª—è –±—É–¥—å-—è–∫–æ—ó –∫–ª–∞—Å–∏—á–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

        **–í–∏—Å–Ω–æ–≤–æ–∫:**
        –¶–µ –¥–æ–≤–æ–¥–∏—Ç—å, —â–æ **–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∞–ª—ñ–∑–º—É –Ω–µ —ñ—Å–Ω—É—î**. –ß–∞—Å—Ç–∏–Ω–∫–∏ –Ω–µ –º–∞—é—Ç—å –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –≤–∏–∑–Ω–∞—á–µ–Ω–æ–≥–æ —Å—Ç–∞–Ω—É, –ø–æ–∫–∏ —ó—Ö –Ω–µ –≤–∏–º—ñ—Ä—è—é—Ç—å. –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —á–∞—Å—Ç–∏–Ω–∫–∏ **–º–∏—Ç—Ç—î–≤–æ** —Ñ–æ—Ä–º—É—î —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å –¥–ª—è —ñ–Ω—à–æ—ó, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ.
        """)

    # =============================================================================
    # 3. –ö–û–°–ú–Ü–ß–ù–ò–ô –ï–ö–°–ü–ï–†–ò–ú–ï–ù–¢ (–ù–û–í–ò–ô –Ü–ù–¢–ï–†–§–ï–ô–°)
    # =============================================================================
    elif sim_type == "3. –ö–æ—Å–º—ñ—á–Ω–∏–π –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç (–ù–µ–ª–æ–∫–∞–ª—å–Ω—ñ—Å—Ç—å)":
        st.header("3. –ö–æ—Å–º—ñ—á–Ω–∞ –ù–µ–ª–æ–∫–∞–ª—å–Ω—ñ—Å—Ç—å")
        
        st.markdown("""
        –¶—è —Å–∏–º—É–ª—è—Ü—ñ—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø–∞—Ä–∞–¥–æ–∫—Å –º–∏—Ç—Ç—î–≤–æ—ó –¥—ñ—ó. 
        –ú–∏ —Ä–æ–∑–Ω–µ—Å–ª–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó –Ω–∞ –∞—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å. –°–≤—ñ—Ç–ª–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª (–∂–æ–≤—Ç–∞ —Ç–æ—á–∫–∞) –ø–æ–∫–∞–∑—É—î –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ —É –í—Å–µ—Å–≤—ñ—Ç—ñ ($c$), —Ç–æ–¥—ñ —è–∫ –∫–≤–∞–Ω—Ç–æ–≤–∏–π —Å—Ç–∞–Ω –∑–º—ñ–Ω—é—î—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ.
        """)

        # --- –Ü–ù–¢–ï–†–§–ï–ô–° –Ø–ö –ù–ê –°–ö–†–Ü–ù–®–û–¢–Ü ---
        col1, col2 = st.columns([1.5, 2.5])

        with col1:
            st.info("–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É, —â–æ–± –≤–∏–º—ñ—Ä—è—Ç–∏ —Å–ø—ñ–Ω –Ω–∞ –ó–µ–º–ª—ñ.")
            
            # –ö–Ω–æ–ø–∫–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
            if st.button("üî¥ –í–ò–ú–Ü–†–Ø–¢–ò –°–ü–Ü–ù (–ê–ª—ñ—Å–∞)", type="primary"):
                st.session_state['cosmic_measured'] = True
                st.session_state['cosmic_outcome'] = np.random.choice([1, -1])
                st.session_state['show_animation'] = False 

            if st.button("üîÑ –°–∫–∏–Ω—É—Ç–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç"):
                st.session_state['cosmic_measured'] = False
                st.session_state['show_animation'] = False
                st.rerun()
            
            st.markdown("---")

            # –ë–ª–æ–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (–∑'—è–≤–ª—è—é—Ç—å—Å—è –ø—ñ—Å–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è)
            if st.session_state.get('cosmic_measured'):
                outcome = st.session_state['cosmic_outcome']
                # –õ–æ–≥—ñ–∫–∞: —è–∫—â–æ –ó–µ–º–ª—è +1 (–í–≥–æ—Ä—É), —Ç–æ –ê–Ω–¥—Ä–æ–º–µ–¥–∞ -1 (–í–Ω–∏–∑)
                txt_earth = "–í–ì–û–†–£ (‚Üë)" if outcome == 1 else "–í–ù–ò–ó (‚Üì)"
                txt_andromeda = "–í–ù–ò–ó (‚Üì)" if outcome == 1 else "–í–ì–û–†–£ (‚Üë)"
                
                st.success(f"üåç –ó–µ–º–ª—è: {txt_earth}")
                st.warning(f"üåå –ê–Ω–¥—Ä–æ–º–µ–¥–∞: {txt_andromeda}")
                st.error("‚è± –ß–∞—Å –ø–µ—Ä–µ–¥–∞—á—ñ —Å—Ç–∞–Ω—É: 0.00 —Å (–ú–∏—Ç—Ç—î–≤–æ!)")
                st.caption("–°–≤—ñ—Ç–ª–æ –∑–∞ —Ü–µ–π —á–∞—Å –ø—Ä–æ–π—à–ª–æ –± –º—ñ–∑–µ—Ä–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å.")
                
                # –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É –∞–Ω—ñ–º–∞—Ü—ñ—ó (—è–∫ –Ω–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ "–î–∏–≤–∏—Ç–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç")
                if st.button("‚ñ∂Ô∏è –î–∏–≤–∏—Ç–∏—Å—å –†–µ–∑—É–ª—å—Ç–∞—Ç (–ê–Ω—ñ–º–∞—Ü—ñ—è)"):
                    st.session_state['show_animation'] = True

        with col2:
            # --- –õ–û–ì–Ü–ö–ê 3D –ê–ù–Ü–ú–ê–¶–Ü–á ---
            
            # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
            pos_Earth = [-80, 0, 0]
            pos_Andromeda = [80, 0, 0]
            
            fig = go.Figure()

            # 1. –§–æ–Ω (–ó—ñ—Ä–∫–∏)
            sx, sy, sz = create_starfield(300)
            fig.add_trace(go.Scatter3d(x=sx, y=sy, z=sz, mode='markers', marker=dict(size=1, color='white', opacity=0.6), hoverinfo='none'))

            # 2. –ü–ª–∞–Ω–µ—Ç–∏
            fig.add_trace(go.Scatter3d(x=[pos_Earth[0]], y=[0], z=[0], mode='markers+text', marker=dict(size=25, color='blue'), text=["üåç –ó–ï–ú–õ–Ø"], textposition="top center", name="–ó–µ–º–ª—è"))
            fig.add_trace(go.Scatter3d(x=[pos_Andromeda[0]], y=[0], z=[0], mode='markers+text', marker=dict(size=35, color='purple'), text=["üåå –ê–ù–î–†–û–ú–ï–î–ê"], textposition="top center", name="–ê–Ω–¥—Ä–æ–º–µ–¥–∞"))
            
            # 3. –õ—ñ–Ω—ñ—è –∑–≤'—è–∑–∫—É
            fig.add_trace(go.Scatter3d(x=[-80, 80], y=[0,0], z=[0,0], mode='lines', line=dict(color='gray', width=1, dash='dash'), hoverinfo='none'))

            # –ê–Ω—ñ–º–∞—Ü—ñ—è –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É
            if st.session_state.get('show_animation') and st.session_state.get('cosmic_measured'):
                outcome = st.session_state['cosmic_outcome']
                frames = []
                n_frames = 60
                collapse_frame = 10 

                for i in range(n_frames):
                    # –°–≤—ñ—Ç–ª–æ (–∂–æ–≤—Ç–µ)
                    light_x = -80 + (i / n_frames) * 50 # –ü—Ä–æ–ª–µ—Ç–∏—Ç—å –ª–∏—à–µ —Ç—Ä–æ—Ö–∏
                    
                    if i < collapse_frame:
                        # –î–æ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è (–ø—É–ª—å—Å–∞—Ü—ñ—è)
                        col_A = 'white'; col_B = 'white'
                        vec_A = 0; vec_B = 0
                    else:
                        # –ü—ñ—Å–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è (–≤–µ–∫—Ç–æ—Ä–∏)
                        growth = min(1.0, (i - collapse_frame) / 5.0)
                        scale = 30 * growth
                        vec_A = scale * outcome
                        vec_B = -scale * outcome
                        col_A = '#00FF00'; col_B = '#FF00FF' # –ó–µ–ª–µ–Ω–∏–π —ñ –ú–∞–ª–∏–Ω–æ–≤–∏–π

                    frames.append(go.Frame(data=[
                        go.Scatter3d(x=sx, y=sy, z=sz, mode='markers', marker=dict(size=1, color='white', opacity=0.6)), # –§–æ–Ω
                        go.Scatter3d(x=[pos_Earth[0]], y=[0], z=[0], mode='markers+text', marker=dict(size=25, color='blue'), text=["üåç"]), # –ó–µ–º–ª—è
                        go.Scatter3d(x=[pos_Andromeda[0]], y=[0], z=[0], mode='markers+text', marker=dict(size=35, color='purple'), text=["üåå"]), # –ê–Ω–¥—Ä–æ–º–µ–¥–∞
                        go.Scatter3d(x=[-80, 80], y=[0,0], z=[0,0], mode='lines', line=dict(color='gray', width=1, dash='dash')), # –õ—ñ–Ω—ñ—è
                        
                        # –°–≤—ñ—Ç–ª–æ
                        go.Scatter3d(x=[light_x], y=[0], z=[0], mode='markers', marker=dict(size=6, color='yellow'), name="–°–≤—ñ—Ç–ª–æ"),
                        # –°–ø—ñ–Ω –ê
                        go.Scatter3d(x=[-80,-80], y=[0,0], z=[0, vec_A], mode='lines+markers', line=dict(color=col_A, width=10), marker=dict(size=0), name="–°–ø—ñ–Ω –ê"),
                        # –°–ø—ñ–Ω –ë
                        go.Scatter3d(x=[80,80], y=[0,0], z=[0, vec_B], mode='lines+markers', line=dict(color=col_B, width=10), marker=dict(size=0), name="–°–ø—ñ–Ω –ë"),
                    ]))
                
                # –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω
                fig.add_trace(go.Scatter3d(x=[-80], y=[0], z=[0], mode='markers', marker=dict(size=6, color='yellow'), name="–°–≤—ñ—Ç–ª–æ"))
                fig.add_trace(go.Scatter3d(x=[-80,-80], y=[0,0], z=[0,0], mode='lines', line=dict(color='white', width=0), name="–°–ø—ñ–Ω –ê"))
                fig.add_trace(go.Scatter3d(x=[80,80], y=[0,0], z=[0,0], mode='lines', line=dict(color='white', width=0), name="–°–ø—ñ–Ω –ë"))

                fig.update_layout(
                    title="–ê–Ω—ñ–º–∞—Ü—ñ—è –ö–æ–ª–∞–ø—Å—É",
                    width=700, height=400,
                    scene=dict(xaxis=dict(range=[-100,100], visible=False), yaxis=dict(range=[-50,50], visible=False), zaxis=dict(range=[-40,40], visible=False), bgcolor='black'),
                    updatemenus=[dict(type="buttons", buttons=[dict(label="‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç", method="animate", args=[None, dict(frame=dict(duration=40, redraw=True), fromcurrent=True)])])]
                )
                fig.frames = frames
                st.plotly_chart(fig)

            else:
                # –°—Ç–∞—Ç–∏—á–Ω–∏–π –≤–∏–≥–ª—è–¥ –¥–æ –∞–Ω—ñ–º–∞—Ü—ñ—ó
                fig_s = go.Figure()
                fig_s.add_trace(go.Scatter3d(x=sx, y=sy, z=sz, mode='markers', marker=dict(size=1, color='white', opacity=0.5)))
                fig_s.add_trace(go.Scatter3d(x=[-80, 80], y=[0,0], z=[0,0], mode='markers+text', text=["üåç –ó–ï–ú–õ–Ø", "üåå –ê–ù–î–†–û–ú–ï–î–ê"], marker=dict(size=[25, 35], color=['blue', 'purple'])))
                fig_s.update_layout(width=700, height=400, scene=dict(xaxis=dict(visible=False), yaxis=dict(visible=False), zaxis=dict(visible=False), bgcolor='black'))
                st.plotly_chart(fig_s, use_container_width=True)

        # --- –î–ï–¢–ê–õ–¨–ù–ï –ü–û–Ø–°–ù–ï–ù–ù–Ø (–ï–í–ï–†–ï–¢–¢) ---
        st.markdown("---")
        st.subheader("üåå –ü–æ—è—Å–Ω–µ–Ω–Ω—è: –¢–µ–æ—Ä—ñ—è –ï–≤–µ—Ä–µ—Ç—Ç–∞ (–ë–∞–≥–∞—Ç–æ—Å–≤—ñ—Ç–æ–≤–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è)")
        st.markdown(r"""
        –¶—è –∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ–∫–∞–∑—É—î –≥–æ–ª–æ–≤–Ω–∏–π –ø–∞—Ä–∞–¥–æ–∫—Å –∫–≤–∞–Ω—Ç–æ–≤–æ—ó –º–µ—Ö–∞–Ω—ñ–∫–∏: —è–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –º–æ–∂–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏—Å—è –º–∏—Ç—Ç—î–≤–æ, —à–≤–∏–¥—à–µ –∑–∞ —Å–≤—ñ—Ç–ª–æ? –ñ–æ–≤—Ç–∞ —Ç–æ—á–∫–∞ (—Å–≤—ñ—Ç–ª–æ) –ª–µ–¥–≤–µ –≤—Å—Ç–∏–≥–ª–∞ –∑—Ä—É—à–∏—Ç–∏, –∞ —Å–ø—ñ–Ω –Ω–∞ –ê–Ω–¥—Ä–æ–º–µ–¥—ñ –≤–∂–µ –∑–º—ñ–Ω–∏–≤—Å—è.
        
        **–¢–µ–æ—Ä—ñ—è –ì'—é –ï–≤–µ—Ä–µ—Ç—Ç–∞ (1957)** –¥–∞—î –¥–∏–≤–æ–≤–∏–∂–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è, —è–∫–µ —Ä—è—Ç—É—î —Ç–µ–æ—Ä—ñ—é –≤—ñ–¥–Ω–æ—Å–Ω–æ—Å—Ç—ñ:
        
        1.  **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –•–≤–∏–ª—å–æ–≤–∞ –§—É–Ω–∫—Ü—ñ—è:** –í–µ—Å—å –í—Å–µ—Å–≤—ñ—Ç –æ–ø–∏—Å—É—î—Ç—å—Å—è —î–¥–∏–Ω–æ—é —Ö–≤–∏–ª—å–æ–≤–æ—é —Ñ—É–Ω–∫—Ü—ñ—î—é, —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å —É —Å–æ–±—ñ *–≤—Å—ñ –º–æ–∂–ª–∏–≤—ñ* –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –ø–æ–¥—ñ–π. –î–æ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Å—Ç–∞–Ω—ñ:
            $$ |\Psi\rangle = \frac{1}{\sqrt{2}} (| \uparrow_A \downarrow_B \rangle - | \downarrow_A \uparrow_B \rangle) $$
        
        2.  **–ù–µ–º–∞—î –∫–æ–ª–∞–ø—Å—É:** –ö–æ–ª–∏ –ê–ª—ñ—Å–∞ –≤–∏–º—ñ—Ä—é—î —Å–ø—ñ–Ω, —Ö–≤–∏–ª—å–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è –Ω–µ "—Å—Ö–ª–æ–ø—É—î—Ç—å—Å—è" –≤–∏–ø–∞–¥–∫–æ–≤–æ. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ, **–í—Å–µ—Å–≤—ñ—Ç —Ä–æ–∑–≥–∞–ª—É–∂—É—î—Ç—å—Å—è**.
        
        3.  **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å–≤—ñ—Ç–∏:**
            * –í –æ–¥–Ω—ñ–π –≥—ñ–ª—Ü—ñ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ —ñ—Å–Ω—É—î –ê–ª—ñ—Å–∞, —è–∫–∞ –ø–æ–±–∞—á–∏–ª–∞ **–í–ì–û–†–£**, —ñ –ë–æ–±, —è–∫–∏–π –º–∞—î —Å–ø—ñ–Ω **–í–ù–ò–ó**.
            * –í —ñ–Ω—à—ñ–π –≥—ñ–ª—Ü—ñ —ñ—Å–Ω—É—î –∫–æ–ø—ñ—è –ê–ª—ñ—Å–∏, —è–∫–∞ –ø–æ–±–∞—á–∏–ª–∞ **–í–ù–ò–ó**, —ñ –∫–æ–ø—ñ—è –ë–æ–±–∞ –∑—ñ —Å–ø—ñ–Ω–æ–º **–í–ì–û–†–£**.
            
        **–ß–æ–º—É —Ü–µ –≤–∏—Ä—ñ—à—É—î –ø—Ä–æ–±–ª–µ–º—É?**
        –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞—Å—è –≤—ñ–¥ –ó–µ–º–ª—ñ –¥–æ –ê–Ω–¥—Ä–æ–º–µ–¥–∏. –û–±–∏–¥–≤—ñ –≥—ñ–ª–∫–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ —ñ—Å–Ω—É–≤–∞–ª–∏ –≤ –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª—ñ –∑–∞–≤–∂–¥–∏. –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ –≤–∏–∑–Ω–∞—á–∏–ª–æ, **–≤ —è–∫—ñ–π —Å–∞–º–µ –≥—ñ–ª—Ü—ñ** –æ–ø–∏–Ω–∏–ª–∞—Å—è –≤–∞—à–∞ —Å–≤—ñ–¥–æ–º—ñ—Å—Ç—å. –î–ª—è –ë–æ–±–∞ –Ω–∞ –ê–Ω–¥—Ä–æ–º–µ–¥—ñ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è, –ø–æ–∫–∏ –≤—ñ–Ω —Å–∞–º –Ω–µ –∑—Ä–æ–±–∏—Ç—å –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —ñ –Ω–µ –¥—ñ–∑–Ω–∞—î—Ç—å—Å—è, –≤ —è–∫—É –≥—ñ–ª–∫—É –ø–æ—Ç—Ä–∞–ø–∏–≤ –≤—ñ–Ω (—Ü–µ –∑–∞–≤–∂–¥–∏ –±—É–¥–µ —Ç–∞ —Å–∞–º–∞ –≥—ñ–ª–∫–∞, —â–æ –π —É –≤–∞—Å, –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ —ñ—Å—Ç–æ—Ä—ñ—ó).
        """)

if __name__ == "__main__":
    run_entanglement_simulation()